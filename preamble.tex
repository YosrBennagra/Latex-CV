
\newif\ifaccentcolor
\accentcolorfalse 

% -------- Document Base Packages --------
\usepackage[utf8]{inputenc} % Character encoding
\usepackage[T1]{fontenc}    % Better hyphenation & copyable text
\usepackage{lmodern}        % Latin Modern - clean, professional font
\usepackage{microtype}      % Better kerning/justification without odd spacing
\usepackage[english]{babel} % Language metadata and hyphenation patterns
\usepackage[margin=0.5in, top=0.45in, bottom=0.45in]{geometry} % Tight margins for 1 page
\usepackage{setspace} % For fine line spacing control if needed
\usepackage{enumitem} % Tighter itemize environments
\usepackage{hyperref} % Clickable links (safe for ATS)
\usepackage{url}
\urlstyle{same} % Keep URLs in the same font for readability/ATS
\hypersetup{
  colorlinks=true,
  urlcolor=black,
  linkcolor=black,
  pdflang={en},
  pdfauthor={Your Name},
  pdfproducer={},
  pdftitle={Curriculum Vitae},
  pdfsubject={Professional CV},
  pdfkeywords={CV, Resume}
}

% Ensure Unicode text is copyable in the generated PDF (ATS-friendly)
% Only if the file exists in the TeX installation
\IfFileExists{glyphtounicode.tex}{\input{glyphtounicode}\pdfgentounicode=1}{}
\usepackage{xcolor}
\ifaccentcolor
  \definecolor{Accent}{HTML}{003366}
\else
  \definecolor{Accent}{gray}{0}
\fi

% Avoid extra spacing after periods (American style acceptable)
\frenchspacing

% -------- Spacing Tweaks --------
% Tight spacing for single page
\setlength{\parskip}{0pt}
\setlength{\parindent}{0pt}

% Consistent list formatting for bullets - very compact
\setlist[itemize]{
  leftmargin=8pt,
  itemsep=0pt,
  topsep=0pt,
  parsep=0pt,
  partopsep=0pt
}

% -------- Helper Macros (public, ATS-safe) --------
% Use public macro names (no @) to avoid needing \makeatletter.
\newcommand{\cvname}[1]{\def\CVName{#1}}
\newcommand{\cvrole}[1]{\def\CVRole{#1}}
\newcommand{\cvcontact}[1]{\def\CVContact{#1}}
% Granular contact fields
\newcommand{\cvphone}[1]{\def\CVPhone{#1}}
\newcommand{\cvemail}[1]{\def\CVEmail{#1}}
\newcommand{\cvaddress}[1]{\def\CVAddress{#1}}
\newcommand{\cvgithub}[1]{\def\CVGithub{#1}}
\newcommand{\cvwebsite}[1]{\def\CVWebsite{#1}}
\newcommand{\cvsummary}[1]{\def\CVSummary{#1}}

% Provide defaults
\cvname{Your Name}
\cvrole{Professional Title / Target Role}
\cvcontact{City, ST | (555) 555-5555 | professional.email@example.com | LinkedIn: linkedin.com/in/username | GitHub: github.com/username}
\cvphone{+000 0000000}
\cvemail{your.email@example.com}
\cvaddress{City, Country}
\cvgithub{https://github.com/username}
\cvwebsite{https://portfolio.example.com}
\cvsummary{Impact-focused professional with X+ years of experience ... (2-3 concise, keyword-rich sentences highlighting scope, strengths, domains, and outcomes.)}

% Section heading macro (simple for ATS parsing)
\newcommand{\cvsection}[1]{%
  \vspace{3pt}\par\textbf{\large #1}\par\vspace{1.5pt}\hrule height 0.6pt \vspace{2pt}
}

% Header macro - name and role on same line, contact below
\newcommand{\makecvheader}{%
  \begingroup
  \par\vspace*{0pt}
  {\Large\textbf{\MakeUppercase{\CVName}}\hfill\Large\textbf{\CVRole}}\par
  \vspace{1pt}
  \endgroup
}

% Contact information - compact single line
\newcommand{\makecontactinfo}{%
  {\small
    \CVPhone~\textbar~\href{mailto:\CVEmail}{\CVEmail}~\textbar~\CVAddress~\textbar~\href{\CVGithub}{GitHub}~\textbar~\href{\CVWebsite}{Portfolio}%
  }\par\vspace{2pt}
}

% Internship environment - tight spacing for 1 page
% Usage: \begin{internship}{Title}{Company}{Location}{Dates}{Company description}
%           \item Task bullet ...
%       \end{internship}
\newenvironment{internship}[5]{%
  \par\textbf{#1}\hfill{\footnotesize\textit{#4}}\\[-2pt]
  #2\\[-5pt]
  \ifx&#5&\else{\footnotesize\textcolor{gray}{#5}}\\[-6pt]\fi
  \begin{itemize}[leftmargin=8pt,itemsep=0pt,topsep=0pt]
}{\end{itemize}\vspace{2.5pt}}

% Entry macro: Title | Company | Location | Dates
% Usage: \cventry{TITLE}{COMPANY}{LOCATION}{DATES}{CONTENT}
\newcommand{\cventry}[5]{%
  \textbf{#1} \hfill #4\\
  \textit{#2, #3}\\[-4pt]
  #5\vspace{6pt}
}

% Compact bullet alias (alternative inline bullet list if ever needed)
\newcommand{\cvbullet}[1]{\item #1}

% Keywords environment (comma-separated plain text for ATS)
\newenvironment{cvkeywords}{%
  \vspace{4pt}\noindent\begin{minipage}{\textwidth}\textbf{Keywords: }\begingroup\raggedright\small
}{\par\endgroup\end{minipage}\vspace{4pt}}

% Date range helper (ensures consistent style)
\newcommand{\daterange}[2]{#1 -- #2}

% (Removed custom \endash macro to avoid redefinition warnings; use -- directly for en-dash)

% Safety: ensure no widow lines at page start if possible
\clubpenalty=10000
\widowpenalty=10000
\hyphenpenalty=10000
\exhyphenpenalty=10000

% Page style: no headers/footers and no page numbers
\pagestyle{empty}

% Single page bias: tighten a bit if near overflow (user can adjust)
% Uncomment to shrink vertical space a little more:
% \setlength{\parskip}{1pt}
% \setlist[itemize]{itemsep=1pt, topsep=1pt}

% End preamble macros

% Summary macro (renders the CV summary text if provided)
\newcommand{\makecvsummary}{{\small \CVSummary}\par}

% Defer metadata that uses user-provided macros until after they are defined
% so the PDF properties match the actual name/role/keywords.
\AtBeginDocument{%
  \hypersetup{
    pdfauthor={\CVName},
    pdftitle={\CVName\space â€” \CVRole},
    pdfsubject={Resume / CV},
    pdfkeywords={Software, Full-Stack, React, NestJS, Spring Boot, JavaScript, TypeScript, Python, MongoDB, SQL, DevOps, CI/CD, Docker, Jenkins, RAG}
  }
}
